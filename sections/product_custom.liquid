{% schema %}
{
  "name": "Product custom",
  "settings": [
    {
      "type": "text",
      "id": "main_title",
      "label": "Título das ofertas",
      "default": "Ofertas disponíveis:"
    },
    {
      "type": "richtext",
      "id": "delivery_text",
      "label": "Descrição do tempo de entrega"
    },
    {
      "type": "richtext",
      "id": "disclamer_text",
      "label": "Descrição do disclamer"
    }
  ],
  "blocks": [
    {
      "type": "coupon",
      "name": "Oferta do Produto",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Título do bloco"
        },
        {
          "type": "text",
          "id": "selected_tags",
          "label": "Selecionar tags",
          "info": "Separe as tags por vírgula e com o texto exatamente igual. E.g: 'SHOP,Soria Natural'"
        },
        {
          "type": "richtext",
          "id": "selected_title",
          "label": "Título da oferta"
        },
        {
          "type": "richtext",
          "id": "selected_description",
          "label": "Descrição da oferta"
        },
        {
          "type": "text",
          "id": "selected_modal_description",
          "label": "Descrição da informação adicional"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product page",
      "category": "product"
    }
  ]
}
{% endschema %}

<style>
  #modal_campaign_details {
    display: none;
    grid-template-rows: repeat(2, max-content);
    padding: 1rem;
    background-color: white;
    border-radius: 1rem;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1001;
    width: auto;
    max-width: 90%;
    overflow: auto;
  }

  #modal_campaign_details > svg {
    width: 20px;
    height: 20px;
    cursor: pointer;
    justify-self: right;
  }

  #modal_campaign_details > div {
    display: grid;
    grid-template-columns: max-content 1fr;
    gap: 1rem;
  }

  #modal_campaign_details > div > svg {
    width: 30px;
    height: 30px;
  }

  #modal_campaign_details > div > div {
    display: grid;
    grid-template-rows: repeat(2, max-content);
    gap: 0.5rem;
  }

  #modal_campaign_details > div > div > h1 {
    margin: 0;
    font-size: 17px;
    line-height: normal;
  }

  #modal_campaign_details > div > div > span {
    margin: 0;
    font-size: 14px;
    max-width: 30rem;
  }

  #add_to_cart_btn_container_mobile {
    background-color: white;
    padding: 1rem;
    z-index: 11;
  }

  .netreviews_review_rate_and_stars {
    margin: 0 !important;
  }

  #custom_wrapper_content {
    display: grid;
    grid-auto-rows: max-content;
    grid-auto-flow: row;
    gap: 0.5rem;
  }

  .delivery_wrapper_custom {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: max-content;
    align-items: center;
    gap: 1rem;
    margin: 0.5rem 0;
  }

  @media screen and (max-width: 1599px) and (min-width: 1000px) {
    #product_page_custom > section > div > div > div > div > h1,
    #product_page_custom > section > aside > #price_custom_modal > h1,
    #product_page_custom > section > div > ul > li > h2 {
      font-size: 20px !important;
    }

    #product_page_custom > section > aside > span,
    #product_page_custom > section > aside > #price_percentage_modal > #percentage_custom,
    #product_page_custom > section > aside > #price_percentage_modal > span,
    #product_page_custom > section > aside > #oferta_product_custom > div > span,
    .delivery_wrapper_custom > span {
      font-size: 12px !important;
    }

    #indicacoes_list_custom > ul > li,
    #product_page_custom > section > aside > #oferta_product_custom > div > h1,
    #product_page_custom > section > aside > #price_custom_modal > span,
    .modal_info_custom > h3 {
      font-size: 14px !important;
    }

    #product_page_custom > section > div > ul > li > span,
    #product_page_custom > section > div > ul > li > p,
    #product_page_custom > section > aside > #price_quantity_modal > button,
    #product_page_custom > section > aside > #price_quantity_modal > a,
    .modal_info_custom > span {
      font-size: 13px !important;
    }

    #product_page_custom > #product_page_breadcrumbs > li > a,
    #product_page_custom > #product_page_breadcrumbs > li > #current_page_custom {
      font-size: 14px !important;
    }
  }

  .delivery_wrapper_custom > img {
    width: 20px;
    height: 20px;
  }

  .delivery_wrapper_custom > span {
    font-size: 14px;
    width: 20rem;
  }

  #get_campaign_details {
    font-size: 14px;
    text-decoration: underline;
    cursor: pointer;
    width: max-content;
    font-weight: 700;
  }

  .modal_info_custom {
    position: absolute;
    width: 18rem;
    background-color: #333;
    padding: 1rem;
    border-radius: 0.65rem;
    display: none;
    grid-auto-rows: max-content;
    grid-auto-flow: row;
    color: white;
    gap: 0.5rem;
    left: 0;
    bottom: 2rem;
    z-index: 10;
    overflow: auto;
    max-height: 114px;
  }

  .modal_info_custom > h3 {
    font-size: 18px;
    margin: 0;
  }

  .modal_info_custom > div {
    height: 1px;
    width: 100%;
    background-color: white;
  }

  #indicacoes_list_custom > ul {
    list-style: none;
    padding: 0;
  }

  #indicacoes_list_custom > ul > li {
    position: relative;
    padding-left: 2rem;
    font-weight: 600;
  }

  #indicacoes_list_custom > ul > li::before {
    content: "";
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 1.5rem;
    height: 1.5rem;
    background-image: url('{{ "check-icon.svg" | asset_url }}');
    background-size: cover;
    background-repeat: no-repeat;
  }

  #product_page_custom {
    display: grid;
    grid-template-rows: repeat(3, max-content);
    gap: 1rem;
    margin: 2rem var(--desktop-container-gutter);
  }

  #product_page_custom_mobile {
    display: none;
    grid-auto-flow: row;
    grid-auto-rows: max-content;
    gap: 1rem;
    margin: 1rem var(--mobile-container-gutter);
  }

  #related_products_custom {
    display: grid;
    grid-template-rows: repeat(2, max-content);
    gap: 0.5rem;
    margin-top: 1rem;
  }

  #related_products_custom > h1 {
    font-size: 21px;
    margin: 0;
    color: #308a36;
  }

  #related_products_custom > ul {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: max-content;
    gap: 0.35rem;
    overflow: hidden;
    list-style-type: none;
  }

  #related_products_custom > ul > li {
    display: grid;
  }

  #related_products_custom > ul > li > section {
    width: 350px;
  }

  #related_products_custom > ul > li > svg {
    position: absolute;
    padding: 0.5rem;
    background-color: #308a36;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    cursor: pointer;
    align-self: center;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.15s ease;
  }

  #related_products_custom > ul:hover > li > svg {
    visibility: visible;
    opacity: 1;
    z-index: 10;
  }

  #related_products_custom > ul > li > #right-button-svg {
    right: var(--desktop-container-gutter);
  }

  #product_page_custom > #product_page_breadcrumbs {
    display: grid;
    grid-auto-columns: max-content;
    grid-auto-flow: column;
    gap: 0.25rem;
    list-style-type: none;
    margin-bottom: 1rem;
    font-weight: 600;
  }

  #product_page_custom_mobile > #product_page_breadcrumbs {
    display: grid;
    grid-auto-columns: max-content;
    grid-auto-flow: column;
    gap: 0.25rem;
    list-style-type: none;
    max-width: calc(100vw - 20px);
    font-weight: 600;
  }

  #product_page_custom > #product_page_breadcrumbs > li {
    display: grid;
  }

  #product_page_custom > #product_page_breadcrumbs > li > a {
    font-size: 16px;
    text-decoration: none;
    cursor: pointer;
  }

  #product_page_custom > #product_page_breadcrumbs > li > a:hover {
    text-decoration: underline;
  }

  #product_page_custom > #product_page_breadcrumbs > li > #current_page_custom {
    color: #308a36;
    font-size: 16px;
  }

  #product_page_custom > section {
    display: grid;
    grid-template-columns: 1fr max-content;
    gap: 2rem;
  }

  #product_page_custom_mobile > section > img {
    width: 100%;
    height: auto;
    max-width: 400px;
  }

  #product_page_custom_mobile > section {
    position: relative;
    height: 100%;
  }

  #product_page_custom_mobile > #product_name_custom {
    display: grid;
    grid-auto-rows: max-content;
    grid-auto-flow: row;
    gap: 0.25rem;
    color: #308a36;
  }

  #product_page_custom_mobile > #product_name_custom > h1 {
    margin: 0;
    font-size: 16px;
  }

  .link_collection {
    font-size: 14px;
    width: max-content;
  }

  #product_page_custom > section > div {
    display: grid;
    grid-template-rows: repeat(2, max-content);
    gap: 2rem;
  }

  #product_page_custom > section > div > div {
    display: grid;
    grid-template-columns: 400px 1fr;
    gap: 2rem;
  }

  #product_page_custom > section > div > div > section {
    position: relative;
    padding: 1rem;
    border: 1px solid #308a36;
    border-radius: 0.65rem;
    height: 100%;
  }

  #product_page_custom > section > div > div > div {
    display: grid;
    grid-template-rows: repeat(2, max-content);
    gap: 2rem;
  }

  #product_page_custom > section > div > div > div > div {
    display: grid;
    grid-auto-rows: max-content;
    grid-auto-flow: row;
    gap: 0.5rem;
    color: #308a36;
  }

  #product_page_custom > section > div > div > div > div > h1 {
    margin: 0;
    font-size: 24px;
    line-height: normal;
  }

  #product_page_custom > section > div > div > div > div > .link_custom {
    text-decoration: none;
    color: currentColor;
    line-height: normal;
    width: max-content;
  }

  #product_page_custom > section > div > div > div > div > a:hover {
    text-decoration: underline;
  }

  #product_page_custom > section > div > ul,
  #product_page_custom_mobile > #product_description_custom {
    display: grid;
    grid-auto-rows: max-content;
    grid-auto-flow: row;
    list-style-type: none;
    gap: 1rem;
  }

  #product_page_custom > section > div > ul > li,
  #product_page_custom_mobile > #product_description_custom > li {
    display: grid;
    grid-template-rows: repeat(2, max-content);
    gap: 0.5rem;
    font-weight: 600;
  }

  #product_page_custom > section > div > ul > li > h2 {
    border-bottom: 2px solid #308a36;
    margin: 0;
    font-size: 24px;
    line-height: normal;
    color: #308a36;
  }

  #product_page_custom_mobile > #product_description_custom > li > h2 {
    border-bottom: 2px solid #308a36;
    margin: 0;
    font-size: 16px;
    line-height: normal;
    color: #308a36;
  }

  #product_page_custom > section > aside {
    display: grid;
    grid-auto-rows: max-content;
    grid-auto-flow: row;
    padding: 1rem 1.5rem;
    gap: 0.5rem;
    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
    border-radius: 0.65rem;
    position: sticky;
    height: max-content;
    top: 100px;
    max-height: calc(100vh - 20px);
    overflow-y: auto;
    font-weight: 600;
  }

  #product_page_custom > section > aside > #price_custom_modal,
  #product_page_custom > section > aside > #price_percentage_modal,
  #product_page_custom_mobile > #custom_wrapper_content > #price_custom_modal,
  #product_page_custom_mobile > #custom_wrapper_content > #price_percentage_modal {
    display: grid;
    grid-template-columns: repeat(2, max-content);
    gap: 0.5rem;
    align-items: center;
  }

  #product_page_custom > section > aside > #price_custom_modal > h1 {
    margin: 0;
    font-size: 24px;
    line-height: normal;
    color: #308a36;
  }

  #product_page_custom_mobile > #custom_wrapper_content > #price_custom_modal > h1 {
    font-size: 21px;
    line-height: normal;
    color: #308a36;
    margin: 0;
  }

  #product_page_custom > section > aside > #price_custom_modal > span {
    text-decoration: line-through;
    line-height: normal;
    font-size: 16px;
  }

  #product_page_custom_mobile > #custom_wrapper_content > #price_custom_modal > span {
    text-decoration: line-through;
    line-height: normal;
    font-size: 16px;
  }

  #product_page_custom > section > aside > #price_percentage_modal > #percentage_custom,
  #product_page_custom_mobile > #custom_wrapper_content > #price_percentage_modal > #percentage_custom {
    background-color: #ffbb12;
    color: black;
    padding: 0 1rem;
    border-radius: 0.35rem;
  }

  #product_page_custom > section > aside > #price_percentage_modal > #percentage_custom,
  #product_page_custom > section > aside > #price_percentage_modal > span,
  #product_page_custom_mobile > #custom_wrapper_content > #price_percentage_modal > #percentage_custom,
  #product_page_custom_mobile > #custom_wrapper_content > #price_percentage_modal > span {
    font-size: 14px;
  }

  #product_page_custom_mobile > aside {
    display: grid;
    grid-auto-rows: max-content;
    grid-auto-flow: row;
    padding: 1rem;
    gap: 0.5rem;
    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
    border-radius: 0.5rem;
    overflow-y: auto;
  }

  #product_page_custom > section > aside > #oferta_product_custom,
  #product_page_custom_mobile > aside > #oferta_product_custom {
    display: grid;
    grid-template-rows: repeat(2, max-content);
    gap: 0.5rem;
    padding: 0.5rem;
    border-radius: 0.5rem;
    background-color: #ffbb12;
    border: 1px solid #308a36;
    font-weight: 500;
  }

  #add_to_cart_btn_container_mobile > a {
    display: grid;
  }

  #product_page_custom > section > aside > #oferta_product_custom > div,
  #product_page_custom_mobile > aside > #oferta_product_custom > div {
    position: relative;
    display: grid;
    grid-template-rows: repeat(2, max-content);
    gap: 0.125rem;
  }

  #product_page_custom > section > aside > #oferta_product_custom > div {
    width: 22rem;
  }

  #product_page_custom > section > aside > #oferta_product_custom > div > h1,
  #product_page_custom_mobile > aside > #oferta_product_custom > div > h1 {
    margin: 0;
    font-weight: 900;
    font-size: 16px;
  }

  #product_page_custom > section > aside > #oferta_product_custom > div > span,
  #product_page_custom_mobile > aside > #oferta_product_custom > div > span {
    font-size: 14px;
  }

  #product_page_custom > section > aside > #price_quantity_modal > a,
  #product_page_custom_mobile > aside > #price_quantity_modal > a,
  #product_page_custom > section > aside > #price_quantity_modal > button,
  #product_page_custom_mobile > aside > #price_quantity_modal > button,
  #add_to_cart_btn_container_mobile > button,
  #add_to_cart_btn_container_mobile > a {
    display: grid;
    grid-template-columns: repeat(2, max-content);
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
  }

  #product_page_custom > section > aside > #price_quantity_modal,
  #product_page_custom_mobile > aside > #price_quantity_modal {
    display: grid;
    grid-template-columns: max-content 1fr;
    gap: 1rem;
  }

  #product_page_custom > section > aside > #price_quantity_modal > div,
  #product_page_custom_mobile > aside > #price_quantity_modal > div {
    display: grid;
    grid-template-columns: repeat(3, max-content);
    gap: 1rem;
    padding: 0.5rem 0.75rem;
    border-radius: 0.65rem;
    border: 1px solid #308a36;
    align-items: center;
    font-weight: 700;
  }

  #product_page_custom > section > aside > #price_quantity_modal > div > *,
  #product_page_custom_mobile > aside > #price_quantity_modal > div > * {
    border: none;
    background-color: transparent;
    color: #308a36;
    padding: 0;
    text-align: center;
  }

  #product_page_custom > section > aside > #price_quantity_modal > div > input:focus,
  #product_page_custom_mobile > aside > #price_quantity_modal > div > input:focus {
    outline: none;
  }

  #product_page_custom > section > aside > #price_quantity_modal > div > input::-webkit-outer-spin-button,
  #product_page_custom_mobile > aside > #price_quantity_modal > div > input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  #product_page_custom > section > aside > #price_quantity_modal > div > input[type=number],
  #product_page_custom_mobile > aside > #price_quantity_modal > div > input[type=number] {
    -moz-appearance: textfield;
  }

  #product_page_custom > section > aside > #price_quantity_modal > button,
  #product_page_custom_mobile > aside > #price_quantity_modal > button,
  #product_page_custom > section > aside > #price_quantity_modal > a,
  #product_page_custom_mobile > aside > #price_quantity_modal > a,
  #add_to_cart_btn_container_mobile > button,
  #add_to_cart_btn_container_mobile > a {
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 0.65rem;
    color: white;
    text-align: center;
    font-size: 15px;
    transition: all 0.15s ease;
  }

  #product_page_custom > section > aside > #price_quantity_modal > button,
  #product_page_custom_mobile > aside > #price_quantity_modal > button,
  #add_to_cart_btn_container_mobile > button,
  #add_to_cart_btn_container_mobile > a {
    background-color: #308a36;
  }

  #add_to_cart_btn_container_mobile > button,
  #add_to_cart_btn_container_mobile > a {
    width: 100%;
  }

  #product_page_custom > section > aside > #price_quantity_modal > button:hover,
  #product_page_custom_mobile > aside > #price_quantity_modal > button:hover,
  #add_to_cart_btn_container_mobile > button:hover,
  #add_to_cart_btn_container_mobile > a:hover {
    background-color: #ffbb12;
    color: black;
  }

  #related_products_custom,
  .NETREVIEWS_PRODUCT_REVIEWS {
    margin: 2rem var(--desktop-container-gutter);
  }

  @media screen and (min-width: 1499px) {
    #product_page_custom,
    #related_products_custom,
    .NETREVIEWS_PRODUCT_REVIEWS {
      margin: 2rem 9vw;
    }

    #related_products_custom > ul > li > #right-button-svg {
      right: 9vw;
    }
  }

  @media screen and (min-width: 2559px) {
    #product_page_custom,
    #related_products_custom,
    .NETREVIEWS_PRODUCT_REVIEWS {
      margin: 2rem 18vw;
    }

    #related_products_custom > ul > li > #right-button-svg {
      right: 18vw;
    }
  }

  @media screen and (max-width: 1499px) {
     #related_products_custom > ul > li > section {
      width: 300px;
    }
  }

  @media screen and (max-width: 1200px) and (min-width: 1000px) {
    #product_page_custom > section > aside {
      padding: 1rem;
    }

    #product_page_custom > section > aside > img {
      width: 250px;
      justify-self: center;
    }

    #product_page_custom > section > aside > #oferta_product_custom > div {
      width: 20rem;
    }
  }

  #modal_overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    z-index: 1000;
    display: none;
  }

  @media screen and (max-width: 360px) {
    #modal_campaign_details > div > svg,
    #modal_campaign_details > svg {
      width: 18px;
      height: 18px;
    }

    #modal_campaign_details > div > div > h1 {
      font-size: 14px;
    }

    #modal_campaign_details > div > div > span {
      font-size: 12px;
    }
  }

  @media screen and (max-width: 1000px) {
    #product_page_custom {
      display: none;
    }

    #modal_campaign_details {
      display: grid;
      top: unset;
      bottom: 0;
      border-radius: 1rem 1rem 0 0;
      max-width: unset;
      max-height: 90%;
      left: unset;
      transform: translateY(100%);
      transition: all 0.3s ease;
    }

    #modal_campaign_details > div > div > span {
      max-width: unset !important;
    }

    #related_products_custom > ul {
      overflow: auto;
    }

    #related_products_custom > ul > li > section {
      width: 250px;
    }

    #related_products_custom > h1 {
      font-size: 16px;
    }

    #related_products_custom,
    .NETREVIEWS_PRODUCT_REVIEWS {
      margin: 1rem var(--mobile-container-gutter);
    }

    #product_page_custom_mobile {
      display: grid;
    }

    .modal_info_custom {
      width: 14rem;
    }

    .modal_info_custom > h3 {
      font-size: 16px;
    }

    .delivery_wrapper_custom > img {
      width: 18px;
      height: 18px;
    }
  }

  @media screen and (max-width: 370px) {
    .delivery_wrapper_custom > span {
      width: 14rem;
    }

    #product_page_custom > section > aside > #price_percentage_modal > #percentage_custom,
    #product_page_custom > section > aside > #price_percentage_modal > span,
    #product_page_custom_mobile > #custom_wrapper_content > #price_percentage_modal > #percentage_custom,
    #product_page_custom_mobile > #custom_wrapper_content > #price_percentage_modal > span,
    #product_page_custom_mobile > aside > #price_quantity_modal > a,
    #add_to_cart_btn_container_mobile > a,
    #product_page_custom_mobile > aside > #price_quantity_modal > button,
    #add_to_cart_btn_container_mobile > button {
      font-size: 12px;
    }
  }
</style>

{% assign has_tag = false %}

{% for block in section.blocks %}
  {% assign array_tags = block.settings.selected_tags | split: ',' %}
  {% for tag in array_tags %}
    {% if product.tags contains tag %}
      {% assign has_tag = true %}
    {% endif %}
  {% endfor %}
{% endfor %}

{% assign vendor_handle = product.vendor | handleize %}
{% assign vendor_collection = blank %}

{% for collection in collections %}
  {% if collection.handle == vendor_handle %}
    {% assign vendor_collection = collection %}
  {% endif %}
{% endfor %}

{% assign descricao = product.description | split: '[' | first %}
{% assign indicacoes = product.description | split: '[Indicações]' | slice: 1, 1 %}
{% assign advertencias = product.description | split: '[Advertências]' | slice: 1, 1 %}
{% assign composicao_nutricional = product.description | split: '[Composição Nutricional]' | slice: 1, 1 %}
{% assign ingredientes = product.description | split: '[Ingredientes]' | slice: 1, 1 %}
{% assign utilizacao = product.description | split: '[Modo de Utilização]' | slice: 1, 1 %}

<main id="product_page_custom">
  <ul id="product_page_breadcrumbs">
    <li>
      <a href="/">Página inicial</a>
    </li>

    <li>
      <span>></span>
    </li>

    {% if vendor_collection != blank %}
      <li>
        <a class="link_collection" href="{{ vendor_collection.url }}">
          {{- product.vendor -}}
        </a>
      </li>

      <li>
        <span>></span>
      </li>
    {% else %}
      {% if product.collections.size > 0 %}
        <li>
          <a class="link_collection" href="/collections/{{ product.collections.first.handle }}">
            {{- product.collections.first.title -}}
          </a>
        </li>

        <li>
          <span>></span>
        </li>
      {% endif %}
    {% endif %}

    <li>
      <span id="current_page_custom">{{ product.title }}</span>
    </li>
  </ul>

  <section>
    <div>
      <div>
        <section class="img_favorite_custom">
          <img src="{{ product.featured_image | img_url: 'master' }}" alt="{{ product.title }}">
        </section>

        <div>
          <div>
            <h1>{{ product.title }}</h1>

            {% if vendor_collection != blank %}
              <a class="link_collection" href="{{ vendor_collection.url }}">
                {{- product.vendor -}}
              </a>
            {% else %}
              {% if product.collections.size > 0 %}
                <a class="link_collection" href="/collections/{{ product.collections.first.handle }}">
                  {{- product.collections.first.title -}}
                </a>
              {% endif %}
            {% endif %}

            <a
              href="#custom_reviews_list"
              class="NETREVIEWS_PRODUCT_STARS"
              data-product-id="{{ product.id }}"
            ></a>
          </div>

          <span id="indicacoes_list_custom">{{ indicacoes }}</span>
        </div>
      </div>

      <ul>
        {% if descricao != blank %}
          <li>
            <h2>Descrição</h2>

            <span>{{ descricao }}</span>
          </li>
        {% endif %}

        {% if utilizacao != blank %}
          <li>
            <h2>Modo de Utilização</h2>

            <span>{{ utilizacao }}</span>
          </li>
        {% endif %}

        {% if composicao_nutricional != blank %}
          <li>
            <h2>Composição Nutricional</h2>

            <span>{{ composicao_nutricional }}</span>
          </li>
        {% endif %}

        {% if ingredientes != blank %}
          <li>
            <h2>Ingredientes</h2>

            <span>{{ ingredientes }}</span>
          </li>
        {% endif %}

        {% if advertencias != blank %}
          <li>
            <h2>Advertências</h2>

            <span>{{ advertencias }}</span>
          </li>
        {% endif %}

        <li>
          <h2>Disclaimer</h2>

          {{ section.settings.disclamer_text }}
        </li>
      </ul>
    </div>

    <aside>
      <div id="price_custom_modal">
        <h1>{{ product.price | money }}</h1>

        {% if product.compare_at_price > 0 %}
          <span>{{ product.compare_at_price | money }}</span>
        {% endif %}
      </div>

      {%- assign units = product.metafields.PHC['Valor-Unidade'] | floor -%}
      {%- assign pvp = product.price -%}
      {%- assign pvp_per_unit = pvp | divided_by: units | money -%}

      {% unless units == blank
        or product.metafields.PHC['Unidade-Plural'] == blank
        or product.metafields.PHC['Unidade-Singular'] == blank
      %}
        <span>
          {{- units }}
          {{ product.metafields.PHC['Unidade-Plural'] }} - €{{ pvp_per_unit | split: '€' }} por
          {{ product.metafields.PHC['Unidade-Singular'] -}}
        </span>
      {% endunless %}

      {% if product.compare_at_price > product.price and product.compare_at_price > 0 %}
        <div id="price_percentage_modal">
          <span id="percentage_custom">
            -
            {{-
              product.compare_at_price
              | minus: product.price
              | times: 100.0
              | divided_by: product.compare_at_price
              | round
            -}}
            %</span
          >
          <span>Desconto exclusivo na loja online.</span>
        </div>
      {% endif %}

      {% if has_tag == true %}
        <div id="oferta_product_custom">
          <span>{{ section.settings.main_title }}</span>
          {% for block in section.blocks %}
            {% assign current_index = forloop.index %}
            {% assign array_tags = block.settings.selected_tags | split: ',' %}

            {% for tag in array_tags %}
              {% if product.tags contains tag %}
                <div>
                  <h1>{{ block.settings.selected_title }}</h1>

                  <span>
                    {{- block.settings.selected_description -}}
                  </span>

                  <a id="get_campaign_details" index="{{ current_index }}">Mais info</a>
                </div>
              {% endif %}
            {% endfor %}
          {% endfor %}
        </div>
      {% endif %}

      <span>Quantidade:</span>

      <div id="price_quantity_modal">
        <div id="quantity-controls">
          <button id="decrease-quantity" type="button">
            <svg focusable="false" class="icon icon--minus" viewBox="0 0 10 2" role="presentation">
              <path d="M10 0v2H0V0z" fill="currentColor"></path>
            </svg>
          </button>

          <input type="number" id="product-quantity" value="1" min="1" max="16">

          <button id="increase-quantity" type="button">
            <svg focusable="false" class="icon icon--plus" viewBox="0 0 10 10" role="presentation">
              <path d="M6 4h4v2H6v4H4V6H0V4h4V0h2v4z" fill="currentColor" fill-rule="evenodd"></path>
            </svg>
          </button>
        </div>

        {% if product.variants.first.available == true %}
          <button
            id="add-to-cart"
            data-product-id="{{ product.variants.first.id }}"
          >
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8.52975 17.136C8.52975 17.3274 8.47298 17.5146 8.36661 17.6738C8.26025 17.8329 8.10907 17.957 7.93219 18.0303C7.75531 18.1036 7.56068 18.1227 7.3729 18.0854C7.18513 18.048 7.01265 17.9558 6.87727 17.8204C6.74189 17.6851 6.6497 17.5126 6.61235 17.3248C6.575 17.137 6.59417 16.9424 6.66744 16.7655C6.7407 16.5887 6.86477 16.4375 7.02396 16.3311C7.18315 16.2247 7.3703 16.168 7.56175 16.168C7.81848 16.168 8.06469 16.27 8.24623 16.4515C8.42777 16.633 8.52975 16.8792 8.52975 17.136Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M16.9829 17.136C16.9829 17.3274 16.9261 17.5146 16.8197 17.6738C16.7134 17.8329 16.5622 17.957 16.3853 18.0303C16.2084 18.1036 16.0138 18.1227 15.826 18.0854C15.6383 18.048 15.4658 17.9558 15.3304 17.8204C15.195 17.6851 15.1028 17.5126 15.0655 17.3248C15.0281 17.137 15.0473 16.9424 15.1206 16.7655C15.1938 16.5887 15.3179 16.4375 15.4771 16.3311C15.6363 16.2247 15.8234 16.168 16.0149 16.168C16.2716 16.168 16.5178 16.27 16.6994 16.4515C16.8809 16.633 16.9829 16.8792 16.9829 17.136Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M1 1H4.258L6.441 11.083C6.53024 11.4428 6.74125 11.7605 7.03819 11.9824C7.33513 12.2042 7.69971 12.3164 8.07 12.3H15.987C16.3566 12.3167 16.7207 12.2052 17.0175 11.9843C17.3144 11.7635 17.5258 11.4468 17.616 11.088L18.916 4.77H5.072" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>

            ADICIONAR
          </button>
        {% else %}
          <a
            href="#"
            class="SI_trigger {{ quick_buy_classes }} notify_button_collection"
            data-product-data="{{ product | json | escape }}"
          >
            <svg
              stroke="currentColor"
              fill="currentColor"
              stroke-width="0"
              viewBox="0 0 448 512"
              height="18px"
              width="18px"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M439.39 362.29c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71zM67.53 368c21.22-27.97 44.42-74.33 44.53-159.42 0-.2-.06-.38-.06-.58 0-61.86 50.14-112 112-112s112 50.14 112 112c0 .2-.06.38-.06.58.11 85.1 23.31 131.46 44.53 159.42H67.53zM224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64z"></path>
            </svg>

            NOTIFICAR
          </a>
        {% endif %}
      </div>

      <div class="delivery_wrapper_custom">
        <img src="{{ "check-icon.svg" | asset_url }}" alt="icon">

        <span>{{ section.settings.delivery_text }}</span>
      </div>

      <img src="{{ "metodos_pag_new.svg" | asset_url }}" alt="icon">
    </aside>
  </section>
</main>

<main id="product_page_custom_mobile">
  <section class="img_favorite_custom">
    <img src="{{ product.featured_image | img_url: 'master' }}" alt="{{ product.title }}">
  </section>

  <div id="product_name_custom">
    <h1>{{ product.title }}</h1>

    {% if vendor_collection != blank %}
      <a class="link_collection" href="{{ vendor_collection.url }}">
        {{- product.vendor -}}
      </a>
    {% else %}
      {% if product.collections.size > 0 %}
        <a class="link_collection" href="/collections/{{ product.collections.first.handle }}">
          {{- product.collections.first.title -}}
        </a>
      {% endif %}
    {% endif %}

    <a href="#custom_reviews_list" class="NETREVIEWS_PRODUCT_STARS" data-product-id="{{ product.id }}"></a>
  </div>

  <div id="custom_wrapper_content">
    <div id="price_custom_modal">
      <h1>{{ product.price | money }}</h1>

      {% if product.compare_at_price > 0 %}
        <span>{{ product.compare_at_price | money }}</span>
      {% endif %}
    </div>

    {%- assign units = product.metafields.PHC['Valor-Unidade'] | floor -%}
    {%- assign pvp = product.price -%}
    {%- assign pvp_per_unit = pvp | divided_by: units | money -%}

    {% unless units == blank
      or product.metafields.PHC['Unidade-Plural'] == blank
      or product.metafields.PHC['Unidade-Singular'] == blank
    %}
      <span>
        {{- units }}
        {{ product.metafields.PHC['Unidade-Plural'] }} - €{{ pvp_per_unit | split: '€' }} por
        {{ product.metafields.PHC['Unidade-Singular'] -}}
      </span>
    {% endunless %}

    {% if product.compare_at_price > product.price and product.compare_at_price > 0 %}
      <div id="price_percentage_modal">
        <span id="percentage_custom">
          -
          {{-
            product.compare_at_price
            | minus: product.price
            | times: 100.0
            | divided_by: product.compare_at_price
            | round
          -}}
          %</span
        >
        <span>Desconto exclusivo na loja online.</span>
      </div>
    {% endif %}
  </div>

  <aside>
    {% if has_tag == true %}
      <div id="oferta_product_custom">
        <span>{{ section.settings.main_title }}</span>
        {% for block in section.blocks %}
          {% assign current_index = forloop.index %}
          {% assign array_tags = block.settings.selected_tags | split: ',' %}

          {% for tag in array_tags %}
            {% if product.tags contains tag %}
              <div>
                <h1>{{ block.settings.selected_title }}</h1>

                <span>{{ block.settings.selected_description }}</span>

                <a id="get_campaign_details" index="{{ current_index }}">Mais info</a>
              </div>
            {% endif %}
          {% endfor %}
        {% endfor %}
      </div>
    {% endif %}

    <span>Quantidade:</span>

    <div id="price_quantity_modal">
      <div id="quantity-controls">
        <button id="decrease-quantity" type="button">
          <svg focusable="false" class="icon icon--minus" viewBox="0 0 10 2" role="presentation">
            <path d="M10 0v2H0V0z" fill="currentColor"></path>
          </svg>
        </button>

        <input type="number" id="product-quantity" value="1" min="1" max="16">

        <button id="increase-quantity" type="button">
          <svg focusable="false" class="icon icon--plus" viewBox="0 0 10 10" role="presentation">
            <path d="M6 4h4v2H6v4H4V6H0V4h4V0h2v4z" fill="currentColor" fill-rule="evenodd"></path>
          </svg>
        </button>
      </div>

      {% if product.variants.first.available == true %}
        <button
          id="add-to-cart"
          data-product-id="{{ product.variants.first.id }}"
        >
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.52975 17.136C8.52975 17.3274 8.47298 17.5146 8.36661 17.6738C8.26025 17.8329 8.10907 17.957 7.93219 18.0303C7.75531 18.1036 7.56068 18.1227 7.3729 18.0854C7.18513 18.048 7.01265 17.9558 6.87727 17.8204C6.74189 17.6851 6.6497 17.5126 6.61235 17.3248C6.575 17.137 6.59417 16.9424 6.66744 16.7655C6.7407 16.5887 6.86477 16.4375 7.02396 16.3311C7.18315 16.2247 7.3703 16.168 7.56175 16.168C7.81848 16.168 8.06469 16.27 8.24623 16.4515C8.42777 16.633 8.52975 16.8792 8.52975 17.136Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M16.9829 17.136C16.9829 17.3274 16.9261 17.5146 16.8197 17.6738C16.7134 17.8329 16.5622 17.957 16.3853 18.0303C16.2084 18.1036 16.0138 18.1227 15.826 18.0854C15.6383 18.048 15.4658 17.9558 15.3304 17.8204C15.195 17.6851 15.1028 17.5126 15.0655 17.3248C15.0281 17.137 15.0473 16.9424 15.1206 16.7655C15.1938 16.5887 15.3179 16.4375 15.4771 16.3311C15.6363 16.2247 15.8234 16.168 16.0149 16.168C16.2716 16.168 16.5178 16.27 16.6994 16.4515C16.8809 16.633 16.9829 16.8792 16.9829 17.136Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M1 1H4.258L6.441 11.083C6.53024 11.4428 6.74125 11.7605 7.03819 11.9824C7.33513 12.2042 7.69971 12.3164 8.07 12.3H15.987C16.3566 12.3167 16.7207 12.2052 17.0175 11.9843C17.3144 11.7635 17.5258 11.4468 17.616 11.088L18.916 4.77H5.072" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>

          ADICIONAR
        </button>
      {% else %}
        <a
          href="#"
          class="SI_trigger {{ quick_buy_classes }} notify_button_collection"
          data-product-data="{{ product | json | escape }}"
        >
          <svg
            stroke="currentColor"
            fill="currentColor"
            stroke-width="0"
            viewBox="0 0 448 512"
            height="18px"
            width="18px"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M439.39 362.29c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71zM67.53 368c21.22-27.97 44.42-74.33 44.53-159.42 0-.2-.06-.38-.06-.58 0-61.86 50.14-112 112-112s112 50.14 112 112c0 .2-.06.38-.06.58.11 85.1 23.31 131.46 44.53 159.42H67.53zM224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64z"></path>
          </svg>

          NOTIFICAR
        </a>
      {% endif %}
    </div>

    <div class="delivery_wrapper_custom">
      <img src="{{ "check-icon.svg" | asset_url }}" alt="icon">

      <span>{{ section.settings.delivery_text }}</span>
    </div>

    <img src="{{ "metodos_pag_new.svg" | asset_url }}" alt="icon">
  </aside>

  <ul id="product_description_custom">
    {% if indicacoes != blank %}
      <li>
        <h2>Indicações</h2>

        <span id="indicacoes_list_custom">{{ indicacoes }}</span>
      </li>
    {% endif %}

    {% if descricao != blank %}
      <li>
        <h2>Descrição</h2>

        <span>{{ descricao }}</span>
      </li>
    {% endif %}

    {% if utilizacao != blank %}
      <li>
        <h2>Modo de Utilização</h2>

        <span>{{ utilizacao }}</span>
      </li>
    {% endif %}

    {% if composicao_nutricional != blank %}
      <li>
        <h2>Composição Nutricional</h2>

        <span>{{ composicao_nutricional }}</span>
      </li>
    {% endif %}

    {% if ingredientes != blank %}
      <li>
        <h2>Ingredientes</h2>

        <span>{{ ingredientes }}</span>
      </li>
    {% endif %}

    {% if advertencias != blank %}
      <li>
        <h2>Advertências</h2>

        <span>{{ advertencias }}</span>
      </li>
    {% endif %}

    <li>
      <h2>Disclaimer</h2>

      {{ section.settings.disclamer_text }}
    </li>
  </ul>
</main>

<div id="custom_reviews_list" class="NETREVIEWS_PRODUCT_REVIEWS" data-product-id="{{ product.id }}"></div>

<div id="related_products_custom">
  <h1>Também poderá gostar</h1>

  <ul>
    <li>
      <svg xmlns="http://www.w3.org/2000/svg" height="12" width="7.5" viewBox="0 0 320 512">
        <path fill="#ffffff" d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/>
      </svg>
    </li>

    {% assign brand_related = collections[product.vendor] %}
    {% if brand_related.products.size > 0 %}
      {% for p in brand_related.products limit: 12 %}
        <li>
          {% render 'product-item-2', product: p %}
        </li>
      {% endfor %}
    {% else %}
      {% for p in product.collections.first.products limit: 12 %}
        <li>
          {% render 'product-item-2', product: p %}
        </li>
      {% endfor %}
    {% endif %}

    <li>
      <svg xmlns="http://www.w3.org/2000/svg" height="12" width="7.5" viewBox="0 0 320 512" id="right-button-svg">
        <path fill="#ffffff" d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/>
      </svg>
    </li>
  </ul>
</div>

{% for block in section.blocks %}
  {% assign current_index = forloop.index %}
  {% assign array_tags = block.settings.selected_tags | split: ',' %}

  {% for tag in array_tags %}
    {% if product.tags contains tag %}
      {% assign block_has_tag = true %}
      {% break %}
    {% endif %}
  {% endfor %}

  {% if block_has_tag == true %}
    <section id="modal_campaign_details" index="{{ current_index }}">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="14"
        width="10.5"
        viewBox="0 0 384 512"
        id="escape_modal"
        index="{{ current_index }}"
      >
        <path fill="#308a36" d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/>
      </svg>

      <div>
        <svg width="39" height="35" viewBox="0 0 39 35" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M26.2727 0.55475L36.0079 10.6563C37.9248 12.6443 39 15.3277 39 18.1241C39 20.9204 37.9248 23.6038 36.0079 25.5918L27.4791 34.4425C27.3106 34.6176 27.1101 34.757 26.8891 34.8526C26.6681 34.9483 26.4309 34.9983 26.1911 35C25.9512 35.0016 25.7134 34.9547 25.4912 34.862C25.2691 34.7694 25.0668 34.6327 24.8961 34.4599C24.5514 34.1108 24.3559 33.6355 24.3527 33.1386C24.3512 32.8925 24.3968 32.6486 24.4872 32.4206C24.5775 32.1927 24.7107 31.9852 24.8792 31.8101L33.4002 22.9595C34.6407 21.6732 35.3366 19.9368 35.3366 18.1274C35.3366 16.318 34.6407 14.5816 33.4002 13.2953L23.6755 3.19515C23.3352 2.84147 23.1458 2.36361 23.149 1.86669C23.1522 1.36977 23.3476 0.894493 23.6924 0.545415C24.0372 0.196338 24.503 0.00205499 24.9874 0.0053061C25.4718 0.00855722 25.9351 0.209076 26.2753 0.562751L26.2727 0.55475ZM1.11654e-05 15.429V3.7499C0.000355705 2.75547 0.385586 1.80188 1.07103 1.09871C1.75647 0.395544 2.68603 0.000353463 3.65539 1.45017e-08H15.0401C15.6809 -5.004e-05 16.3155 0.129478 16.9074 0.381178C17.4994 0.632878 18.0372 1.00181 18.4901 1.46689L31.2839 14.5915C32.1975 15.5288 32.7106 16.8 32.7106 18.1254C32.7106 19.4508 32.1975 20.722 31.2839 21.6593L21.1173 32.0848C20.2036 33.022 18.9645 33.5484 17.6725 33.5484C16.3804 33.5484 15.1413 33.022 14.2277 32.0848L1.42993 18.9602C0.975595 18.498 0.615247 17.9479 0.369786 17.3417C0.124324 16.7355 -0.00136413 16.0854 1.11654e-05 15.429ZM10.9662 8.74932C10.9662 8.25479 10.8232 7.77137 10.5554 7.36018C10.2876 6.949 9.90691 6.62852 9.46154 6.43927C9.01617 6.25002 8.5261 6.20051 8.0533 6.29698C7.5805 6.39346 7.1462 6.6316 6.80533 6.98128C6.46446 7.33097 6.23233 7.77649 6.13828 8.26152C6.04423 8.74654 6.0925 9.24928 6.27698 9.70617C6.46146 10.1631 6.77386 10.5536 7.17468 10.8283C7.5755 11.103 8.04674 11.2497 8.5288 11.2497C9.17523 11.2497 9.79518 10.9863 10.2523 10.5173C10.7094 10.0484 10.9662 9.41246 10.9662 8.74932Z" fill="#258439"/>
        </svg>

        <div>
          <h1>Mais info</h1>

          {% if block.settings.selected_modal_description %}
            <span>{{ block.settings.selected_modal_description }}</span>
          {% endif %}
        </div>
      </div>
    </section>
  {% endif %}
{% endfor %}

<div id="modal_overlay"></div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const onResize = () => {
      const getElements = document.querySelectorAll("#get_campaign_details");

      if (getElements) {
        getElements.forEach((element) => {
          element.addEventListener("click", function() {
            const elementIndex = element.getAttribute("index");
            const modalElement = Array.from(document.querySelectorAll("#modal_campaign_details")).find((el) => el.getAttribute("index") === elementIndex);
            const overlayElement = document.querySelector("#modal_overlay");

            overlayElement.style.display = 'block'

            if (window.innerWidth > 1000) {
              modalElement.style.display = 'grid';
            } else {
              modalElement.style.transform = 'translateY(0)';
            }
          });
        });
      }

      const escapeElements = document.querySelectorAll("#escape_modal");

      if (escapeElements) {
        escapeElements.forEach((element) => {
          element.addEventListener("click", function() {
            const elementIndex = element.getAttribute("index");
            const modalElement = Array.from(document.querySelectorAll("#modal_campaign_details")).find((el) => el.getAttribute("index") === elementIndex);
            const overlayElement = document.querySelector("#modal_overlay");

            overlayElement.style.display = 'none'

            if (window.innerWidth > 1000) {
              modalElement.style.display = 'none'
            } else {
              modalElement.style.transform = 'translateY(100%)';
            }
          });
        });
      }
    }

    onResize();

    window.addEventListener("resize", onResize);
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const quantityInput = document.querySelectorAll("#product-quantity");
    const decreaseButton = document.querySelectorAll("#decrease-quantity");
    const increaseButton = document.querySelectorAll("#increase-quantity");
    const addToCartButton = document.querySelectorAll("#add-to-cart");
  
    const updateQuantity = (delta) => {
      const currentValue = parseInt(quantityInput[0].value, 10) || 1;
      const newValue = Math.max(1, currentValue + delta);
      quantityInput.forEach((input) => (input.value = newValue));
    };
  
    decreaseButton.forEach((input) =>
      input.addEventListener("click", () => updateQuantity(-1))
    );
    increaseButton.forEach((input) =>
      input.addEventListener("click", () => updateQuantity(1))
    );

    const loader = document.getElementById("loader");

    function showLoader() {
      loader.style.display = "block";
      loader.style.width = "0%";

      setTimeout(() => {
        loader.style.width = "30%";
      }, 100);
    }

    function hideLoader() {
      loader.style.width = "100%";
      
      setTimeout(() => {
        loader.style.display = "none";
        loader.style.width = "0%";
      }, 400);
    }
  
    addToCartButton.forEach((cart) => {
      cart.addEventListener("click", () => {
        const productId = cart.getAttribute("data-product-id");
        const quantity = parseInt(quantityInput[0].value, 10) || 1;
  
        if (!productId) {
          return;
        }

        showLoader();
  
        fetch(`/cart/add.js`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ id: productId, quantity: quantity }),
        })
          .then((response) => {
            if (!response.ok) {
              return response.json().then((data) => {
                throw new Error(data.message || "Erro ao adicionar ao carrinho.");
              });
            }

            fetch(`/cart?view=mini-cart&timestamp=${Date.now()}`)
              .then((res) => {
                if (!res.ok) {
                  throw new Error("Erro ao obter carrinho");
                }

                return res.text();
              })
              .then((data) => {
                if (data) {
                  const carts = document.querySelectorAll("#mini-cart");

                  if (carts) {
                    carts.forEach((cart) => cart.innerHTML = data);
                    
                    if (innerWidth >= 2559) {
                      carts.forEach((cart) => cart.style.marginRight = "17vw");
                    }
            
                    if (innerWidth < 2559 && innerWidth >= 1499) {
                      carts.forEach((cart) => cart.style.marginRight = "8vw");
                    }
            
                    if (innerWidth < 1499 && innerWidth >= 1000) {
                      carts.forEach((cart) => cart.style.marginRight = "2vw");
                    }
            
                    if (innerWidth >= 1000) {
                      carts.forEach((cart) => cart.style.top = "4.85rem");
                    }
            
                    if (innerWidth < 1000) {
                      carts.forEach((cart) => {
                        cart.style.transform = "scale(1)";
                        cart.style.maxHeight = "calc(100vh - 40px)";
                        cart.style.padding = "1rem 1rem 2rem 1rem";
                      });
            
                      const as = carts.forEach((cart) => cart.querySelector("a"));
            
                      if (as) {
                        as.forEach((a) => a.style.padding = "0 1rem");
                      }
                    } else {
                      carts.forEach((cart) => {
                        cart.style.visibility = "visible";
                        cart.style.opacity = 1
                      });
                    }
                  }

                  return fetch("/cart.js")
                }
              })
              .then((res) => {
                if (!res.ok) {
                  throw new Error("Error while fetching cart")
                }

                return res.json();
              })
              .then((data) => {
                if (data) {
                  const cartCounters = document.querySelectorAll(".header__cart-count");

                  if (cartCounters) {
                    cartCounters.forEach((cart) => cart.innerText = data.item_count );
                  } 
                }
              })
              .catch((error) => {
                console.error("Error when getting cart");
              })
          })
          .catch((error) => {
            console.error("Erro ao adicionar ao carrinho:", error);
            alert(error.message || "Erro ao adicionar ao carrinho.");
          })
          .finally(() => hideLoader());
      });
    });
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const productsContainer = document.querySelector("#related_products_custom ul");
    const leftButton = document.querySelector("#related_products_custom ul li:first-child svg");
    const rightButton = document.querySelector("#related_products_custom ul li:last-child svg");

    if (!productsContainer || !leftButton || !rightButton) return;

    const updateLayout = () => {
      if (window.innerWidth > 1000) {
        leftButton.style.display = "block";
        rightButton.style.display = "block";

        const productWidth = productsContainer.offsetWidth / 4;
        const itemsPerPage = 4;
        productsContainer.style.scrollBehavior = "smooth";

        leftButton.onclick = () => {
          productsContainer.scrollLeft -= productWidth * itemsPerPage;
        };

        rightButton.onclick = () => {
          productsContainer.scrollLeft += productWidth * itemsPerPage;
        };
      } else {
        leftButton.style.display = "none";
        rightButton.style.display = "none";
      }
    };

    updateLayout();

    window.addEventListener("resize", updateLayout);
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const onResize = () => {
     const wrappers = document.querySelectorAll(".img_favorite_custom");

      wrappers.forEach(wrapper => {
        const existingButton = wrapper.querySelector(".swym-button-bar");
        if (existingButton) {
          existingButton.remove();
        }
      });

      const addHtml = (element) => {
        if (element && !element.querySelector(".swym-button-bar")) {
          element.innerHTML += `
            <div class="swym-button-bar swym-wishlist-button-bar swym-inject">
              <div class="swym-btn-container swym-inject" data-position="default" id="favorite_btn_custom">
                <button
                  class="swym-button swym-add-to-wishlist swym-inject swym-icon swym-heart swym-loaded"
                  onclick="event.preventDefault();"
                ></button>
              </div>
            </div>
          `
        }
      }

      if (wrappers.length > 1) {
        window.innerWidth > 1000 ? addHtml(wrappers[0]) : addHtml(wrappers[1]);
      } 
    }

    onResize();

    window.addEventListener("resize", onResize);
  });
</script>

<script
  charset="utf-8"
  src="https://cl.avis-verifies.com/pt/cache/3/0/b/30b17f6b-db4c-0c24-0d69-c5635e2a1e35/AWS/PRODUCT_API/tag.min.js"
></script>
